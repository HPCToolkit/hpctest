#=========================================#
# HPCTest description for AMG2006         #
#=========================================#


info:
    name:  "AMG2006"
    version: 1.0
    homepage: https://svn.mcs.anl.gov/repos/performance/benchmarks/AMG2006
    url: https://github.com/HPCToolkit
    description: >
        AMG2006 is a parallel algebraic multigrid solver for linear systems arising
        from problems on unstructured grids. 
    
config:
    - default variants: [ openmp mpi ]
    
    - base: serial
      description: "Build as a serial program"
      languages: [ c ]
      flags:
        CXXFLAGS: "-g -O2"
        LDFLAGS:  "-lm"
        env:
            - "INCLUDE_CFLAGS = $CFLAGS"
            - "INCLUDE_LFLAGS = $LDFLAGS"
        
    - variant: openmp
      description: "Build with OpenMP support"
      flags:
        +CFLAGS: $OPENMP_FLAG
        +LDFLAGS: $OPENMP_FLAG
        env:
            - "-DHYPRE_USING_OPENMP"
            
    - variant: mpi
      description: "Build with MPI support"
      languages: [ mpicc ]
      depends: [ mpi ]
      flags:
        env:
            - "-DTIMER_USE_MPI"
            - shouldn't some MPI vars be set here??

build:
    kind: makefile
    separate: []
    install:
      - test/amg2013
      - test/sstruct.in.AMG.FD

run:
    cmd: "amg2006 -P 2 2 1 -n 2 2 4"
    mpiexec: "-n 4"

    
    
    
    